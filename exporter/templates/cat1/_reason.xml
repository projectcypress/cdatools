{{if hasReason .EntrySection.Entry}}
  {{$reason := .EntrySection.Entry.NegationReasonOrReason}}
  {{$valueSetOid := reasonValueSetOid $reason .MapDataCriteria.FieldOids}}
  {{if $valueSetOid}}
    <entryRelationship typeCode="RSON">
      <observation classCode="OBS" moodCode="EVN">
        <templateId root="2.16.840.1.113883.10.20.24.3.88" {{if isR2 .EntrySection}}{{else}}extension="2014-12-01"{{end}}/>
        <id root="1.3.6.1.4.1.115" extension="{{identifierForInterface $reason.Code .EntrySection.StartTime}}"/>
        {{if isR2 .EntrySection}}
          <code code="410666004" codeSystem="2.16.840.1.113883.6.96" displayName="reason" codeSystemName="SNOMED CT"/>
        {{else}}
          <code code="77301-0" codeSystem="2.16.840.1.113883.6.1" displayName="reason" codeSystemName="LOINC"/>
        {{end}}
        <statusCode code="completed"/>
        {{if isR2 .EntrySection}}
          <effectiveTime {{valueOrNullFlavor .EntrySection.StartTime}}/>
        {{else}}
          <effectiveTime>
            <start_time_value>{{.EntrySection.StartTime}}</start_time_value>
            <low {{valueOrNullFlavor .EntrySection.StartTime}}/>
          </effectiveTime>
        {{end}}
        <value xsi:type="CD" code="{{.EntrySection.Reason.Code}}" codeSystem="{{oidForCodeSystem .EntrySection.Reason.CodeSystem}}" sdtc:valueSet="{{$valueSetOid}}"/>
      </observation>
    </entryRelationship>
  {{end}}
{{end}}