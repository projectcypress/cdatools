<{{- valueOrDefault .TagName "code" -}}
  {{- if hasPreferredCode .PreferredCode}} code='{{- .PreferredCode.Code}}' codeSystem='{{- oidForCodeSystem .PreferredCode.CodeSystem}}' {{.ExtraContent}}
  {{- else}}
    {{- $excludeNullFlavor := valueOrDefault .ExcludeNullFlavor false}}
    {{- if $excludeNullFlavor}}{{- else}} nillFlavor='UNK'
    {{- end}}
  {{- end -}}
>
  {{- $attribute := valueOrDefault .Attribute "codes"}}
  {{- if codeDisplayAttributeIsCodes $attribute}}
    <originalText>{{- .Description}}</originalText>
  {{- end}}
  {{- if hasLaterality .Laterality}}
    <!-- QDM Attribute: Laterality -->
    <qualifier>
        <name code='182353008' codeSystem='2.16.840.1.113883.6.96' displayName='Side' />
        <value xsi:type='CD' code='{{- .Laterality.Code}}' 
            displayName='{{- .Laterality.Title}}' 
            sdtc:valueSet='{{- oidForCodeForField .Laterality.CodedConcept .MapDataCriteria.FieldOids "LATERALITY"}}'
            codeSystem='{{- oidForCodeSystem .Laterality.CodeSystem}}'/>
    </qualifier>
  {{- end}}
</{{- valueOrDefault .TagName "code"}}>